plugin: amazon.aws.aws_ec2
regions:
  - us-east-1

hostnames:
  - private-ip-address     #gives private ip as output inside hosts group    
  #- tag:Name              #we get output: frontend-dev, user-dev etc,


filters:
  instance-state-name : running
  tag:Name: frontend-dev

compose:
  # connect using private IP internally (it prints private ip as output)
  ansible_host: private_ip_address  

keyed_groups:
- separator: ''
  # name of the group is frontend ( in output it prints name of group as frontend in place of hosts)
  key: tags.Name | regex_replace('-.*$', '')
